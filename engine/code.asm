; ====================================================================
; ----------------------------------------------------------------
; Screen mode $00
; 
; MARS ONLY
; ----------------------------------------------------------------

; ====================================================================
; ------------------------------------------------------
; Structs
; ------------------------------------------------------

		struct 0
mdmdl_x		ds.w 1
mdmdl_y		ds.w 1
mdmdl_z		ds.w 1
mdmdl_x_rot	ds.w 1
mdmdl_y_rot	ds.w 1
mdmdl_z_rot	ds.w 1
sizeof_thismdl	ds.l 0
		finish
		
; ====================================================================
; ------------------------------------------------------
; RAM
; ------------------------------------------------------

		struct RAM_ModeBuff
GmMd0_Models	ds.b sizeof_thismdl
		finish
		
; ====================================================================
; ------------------------------------------------------
; CODE section
; ------------------------------------------------------

GmMode_0:		
		move.w	#$2700,sr
		bsr	Mode_Init

		clr.b	(RAM_VdpRegs+7).l			; Backdrop color $00
		bclr	#bitDispEnbl,(RAM_VdpRegs+1).l
		move.w	(vdp_ctrl),d4
		and.w	#1,d4
		beq.s	.ntsc
		bset	#3,(RAM_VdpRegs+1).l
.ntsc:
		bsr	Video_Update
		lea	ASCII_PAL(pc),a0
		moveq	#$30,d0
		move.w	#$F,d1
		bsr	Video_LoadPal

	; Enable display
		bset	#bitDispEnbl,(RAM_VdpRegs+1).l
		bsr	Video_Update

; ====================================================================
; ------------------------------------------------------
; Loop
; ------------------------------------------------------

.loop:
		bsr	System_VSync

		lea	str_Title(pc),a0
		move.l	#locate(0,0,26),d0
		bsr	Video_Print
		bra	.loop
		
; ====================================================================
; ------------------------------------------------------
; Subroutines
; ------------------------------------------------------

; ----------------------------------------------
; Init models
; ----------------------------------------------

Mde0_Mars_Init:
		rts

; ----------------------------------------------
; Move model
; ----------------------------------------------

Mde0_Mars_Move:
		rts

Mde0_Mars_TEST:
		lea	($880100),a0
		move.l	#$18000,d0
		move.w	#$100,d1
		bra	MdMars_SendData

; ====================================================================
; ------------------------------------------------------
; VSync
; ------------------------------------------------------

; ====================================================================
; ------------------------------------------------------
; Interrupts
; ------------------------------------------------------

; --------------------------------------------------
; VBlank
; --------------------------------------------------

; --------------------------------------------------
; HBlank
; --------------------------------------------------
		
; ====================================================================
; ------------------------------------------------------
; Objects
; ------------------------------------------------------

; ====================================================================
; ------------------------------------------------------
; DATA Section, small
; ------------------------------------------------------

		align 2
str_Title:	dc.b "\\w \\w \\w \\w",$A
		dc.b "\\w \\w \\w \\w         MD: \\l",0
		dc.l sysmars_reg+comm0
		dc.l sysmars_reg+comm2
		dc.l sysmars_reg+comm4
		dc.l sysmars_reg+comm6
		dc.l sysmars_reg+comm8
		dc.l sysmars_reg+comm10
		dc.l sysmars_reg+comm12
		dc.l sysmars_reg+comm14
		dc.l RAM_FrameCount
		align 4
